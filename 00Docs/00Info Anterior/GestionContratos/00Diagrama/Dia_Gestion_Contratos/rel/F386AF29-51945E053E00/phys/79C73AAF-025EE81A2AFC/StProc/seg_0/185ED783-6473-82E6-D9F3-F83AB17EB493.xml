<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.StoredProcedureOraclev10g" name="PRC_VALIDA_CONTRATOS_PROXIMOS_A_VENCER_Y_VENCIDOS_MAIL" directorySegmentName="seg_0" id="185ED783-6473-82E6-D9F3-F83AB17EB493">
<sourceConnName>Gestion Contratos</sourceConnName>
<sourceObjSchema>ARQFACTSQA</sourceObjSchema>
<sourceObjName>PRC_VALIDA_CONTRATOS_PROXIMOS_A_VENCER_Y_VENCIDOS_MAIL</sourceObjName>
<createdBy>HÃ©ctorJavierCuervoRa</createdBy>
<createdTime>2026-01-27 19:14:46 UTC</createdTime>
<ownerDesignName>Dia_Gestion_Contratos</ownerDesignName>
<owner><![CDATA[3A367D78-C584-B7A5-0169-F84F01461631]]></owner>
<source>CREATE OR REPLACE PROCEDURE ARQFACTSQA.PRC_VALIDA_CONTRATOS_PROXIMOS_A_VENCER_Y_VENCIDOS_MAIL IS
    
    vaUrl VARCHAR2(1000) := &apos;http://gestion-contratos-arquitecsoft.is.arqbs.com/send-mail-contracts-soon-to-expire-and-expired&apos;;
    vaApiToken VARCHAR2(200) := &apos;6c0fd7b6e34a8f03572c23d6268a4d930hash6275b6f86c7e31c2748e7879a40d54&apos;;
    vaJson VARCHAR2(200);
    clResponse CLOB;

BEGIN
    -- Construir el JSON
    vaJson := &apos;{&quot;api_token&quot;: &quot;&apos; || vaApiToken || &apos;&quot;}&apos;;

    --DBMS_OUTPUT.PUT_LINE(&apos;before send: &apos; || vaJson);
    clResponse := int_pkrestapi.fsbrestcall(vaJson, vaUrl);

END PRC_VALIDA_CONTRATOS_PROXIMOS_A_VENCER_Y_VENCIDOS_MAIL;</source>
</StoredProcedureOraclev10g>